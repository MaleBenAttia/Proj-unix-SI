# ============================================
#     MAKEFILE - TCP MULTISERVICE GTK
# ============================================
# 
# Utilisation:
#   make          - Compile tout
#   make client   - Compile le client
#   make serveur  - Compile le serveur
#   make clean    - Nettoie
#   make help     - Affiche l'aide

# ===== CONFIGURATION =====
CC = gcc
CFLAGS = -Wall `pkg-config --cflags gtk+-3.0`
LIBS = `pkg-config --libs gtk+-3.0`

# ===== CIBLES PRINCIPALES =====

# Compiler tout
all: clientTCP_gtk serveurTCP_gtk
	@echo ""
	@echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
	@echo "â•‘   âœ… COMPILATION RÃ‰USSIE !             â•‘"
	@echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
	@echo ""
	@echo "ğŸ“‹ Fichiers crÃ©Ã©s:"
	@echo "   - clientTCP_gtk"
	@echo "   - serveurTCP_gtk"
	@echo ""
	@echo "ğŸš€ Pour tester:"
	@echo "   Terminal 1: ./serveurTCP_gtk"
	@echo "   Terminal 2: ./clientTCP_gtk"
	@echo ""

# Compiler le client
client: clientTCP_gtk
	@echo "âœ… Client TCP GTK compilÃ©!"

# Compiler le serveur
serveur: serveurTCP_gtk
	@echo "âœ… Serveur TCP GTK compilÃ©!"

# ===== RÃˆGLES DE COMPILATION =====

clientTCP_gtk: clientTCP_gtk.c common.h
	@echo "ğŸ”¨ Compilation du client TCP multiservice..."
	$(CC) $(CFLAGS) clientTCP_gtk.c -o clientTCP_gtk $(LIBS)

serveurTCP_gtk: serveurTCP_gtk.c common.h
	@echo "ğŸ”¨ Compilation du serveur TCP multiservice..."
	$(CC) $(CFLAGS) serveurTCP_gtk.c -o serveurTCP_gtk $(LIBS)

# ===== NETTOYAGE =====

clean:
	@echo "ğŸ§¹ Nettoyage des fichiers compilÃ©s..."
	rm -f clientTCP_gtk serveurTCP_gtk
	@echo "âœ… Nettoyage terminÃ©!"

# ===== AIDE =====

help:
	@echo ""
	@echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
	@echo "â•‘   MAKEFILE TCP MULTISERVICE GTK        â•‘"
	@echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
	@echo ""
	@echo "ğŸ“‹ Commandes disponibles:"
	@echo ""
	@echo "  make          - Compile tout (client + serveur)"
	@echo "  make client   - Compile uniquement le client"
	@echo "  make serveur  - Compile uniquement le serveur"
	@echo "  make clean    - Supprime les fichiers compilÃ©s"
	@echo "  make help     - Affiche cette aide"
	@echo ""
	@echo "ğŸ“ Fichiers nÃ©cessaires:"
	@echo "  - common.h            (en-tÃªtes)"
	@echo "  - clientTCP_gtk.c     (code client)"
	@echo "  - serveurTCP_gtk.c    (code serveur)"
	@echo ""
	@echo "ğŸ”§ PrÃ©requis:"
	@echo "  - gcc (compilateur)"
	@echo "  - GTK+ 3.0 (libgtk-3-dev)"
	@echo ""
	@echo "ğŸ“¦ Installation GTK:"
	@echo "  Ubuntu/Debian:"
	@echo "    sudo apt-get install libgtk-3-dev"
	@echo ""
	@echo "  Fedora:"
	@echo "    sudo dnf install gtk3-devel"
	@echo ""
	@echo "ğŸ¯ Services disponibles:"
	@echo "  [1] Date et Heure du serveur"
	@echo "  [2] Liste des fichiers d'un rÃ©pertoire"
	@echo "  [3] Contenu d'un fichier"
	@echo "  [4] DurÃ©e de connexion"
	@echo ""

.PHONY: all client serveur clean help
